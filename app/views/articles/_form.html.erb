<%= form_with(model: article, local: true) do |f| %>

	<% if article.errors.any? %>
		<div id="error_explanation">
			<h2><%= pluralize(article.errors.count, "error") %> prohibited this article from being saved:</h2>

			<ul>
			<% article.errors.full_messages.each do |message| %>
				<li><%= message %></li>
			<% end %>
			</ul>
		</div>
	<% end %>
	
	<div class="content-admin-block right">
		Breaking <%= f.check_box :topstory %>
		Free <%= f.check_box :is_free %>
		<%= f.collection_select :type_id, @types.where(language_id: @article.language_id), :id, :name, {:selected => @article.type_id ? @article.type_id : 1}, {:style => "width: 100px;"} %>
		<strong>Update of?</strong> <%= f.collection_select :main_id, @mains, :id, :headline, {include_blank: true, :selected => @article.main_id}, {:style => "width: 200px;"} %>
		<strong>In story:</strong> <%= f.collection_select :story_id, @stories, :id, :headline, {include_blank: true, :selected => @article.story_id}, {:style => "width: 200px;"} %>
	</div>
	<div class="content-admin-block right">
		<strong>Language:</strong> <%= f.collection_select :language_id, @languages, :id, :name, {:selected => @article.language_id ? @article.language_id : 1} %>
		<strong>Original is:</strong> <%= f.collection_select :original_id, @nottranslations, :id, :headline, {include_blank: true, :selected => @article.original_id}, {:style => "width: 200px;"} %>
		<strong>Campaign:</strong> <%= f.collection_select :campaign_id, @campaigns.where(language_id: @article.language_id), :id, :name, {:selected => @article.campaign_id ? @article.campaign_id : 1} %>
		<%= f.collection_select :status_id, @statuses, :id, :name, {:selected => @article.status_id ? @article.status_id : 1} %>
		<%= f.submit %>
		<%= link_to 'Go', @article %>
	</div>

	<div class="content-admin-block">
		<%= f.text_field :headline, :class => "content-admin-headline", placeholder: "Headline…" %>
	</div>

	<div class="content-admin-block">
		<%= f.text_field :lede, :class => "content-admin-lede", placeholder: "Lede…" %>
	</div>
	
	<div class="content-admin-block">
		<%= f.text_field :audio, :class => "content-admin-media", placeholder: "Audio file…" %>
	</div>
	
	<div class="content-admin-block">
		<%= f.text_field :image, :class => "content-admin-media", placeholder: "Main image file…" %>
	</div>
	
	<div class="content-admin-block">
		<% if @article.original.blank? %>
			<%= f.text_area :body, :class => "content-admin-body", placeholder: "Article text…" %>
		<% else %>
			<div class="content-admin-block-tr">
			<div class="content-admin-block-tr-left">
				<%= markdown(@article.original.body) %>
			</div>
			<div class="content-admin-block-tr-right">
				<%= f.text_area :body, :class => "content-admin-body" %>
			</div>
			</div>
		<% end %>
	</div><div class="clear"></div>
<% end %>